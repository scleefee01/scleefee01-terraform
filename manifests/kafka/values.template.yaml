deleteTopicEnable: true

logRetentionBytes: -1
logRetentionHours: 168

resources:
  limits:
    cpu: "3"
    memory: "6Gi"
  requests:
    cpu: "1"
    memory: "4Gi"

# Explicit per-role resources (KRaft). These override the chart defaults
# and avoid small limits that can lead to OOM/restarts.
controller:
  resources:
    limits:
      cpu: "3"
      memory: "6Gi"
    requests:
      cpu: "1"
      memory: "4Gi"
  persistence:
    enabled: true
    size: 80Gi
    storageClass: gp3

broker:
  resources:
    limits:
      cpu: "3"
      memory: "6Gi"
    requests:
      cpu: "1"
      memory: "4Gi"

persistence:
  enabled: true
  size: 80Gi
  storageClass: gp3

extraEnvVars:
  - name: KAFKA_HEAP_OPTS
    value: "-Xmx1536m -Xms1024m"

overrideConfiguration:
  num.network.threads: "8"
  num.io.threads: "16"
  socket.send.buffer.bytes: "1048576"
  socket.receive.buffer.bytes: "1048576"
  compression.type: "lz4"

podLabels:
  benchmark/system: kube-bench
  benchmark/mutual-exclusive-key: "bench"
  benchmark/pod-affinity: kafka


auth:
  enabled: false

listeners:
  client:
    protocol: PLAINTEXT
  controller:
    protocol: PLAINTEXT
  interbroker:
    protocol: PLAINTEXT

metrics:
  kafka:
    enabled: false
  jmx:
    enabled: false
  serviceMonitor:
    enabled: false

image:
  registry: docker.io
  repository: bitnamilegacy/kafka
  tag: 4.0.0-debian-12-r10
